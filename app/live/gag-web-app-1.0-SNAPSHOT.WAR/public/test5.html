<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Hand Skeleton Visualization</title>
    <script type="module">
        import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.139.2/build/three.module.js';

        document.addEventListener("DOMContentLoaded", function () {
            const container = document.getElementById('visualization-container');

            // Scene setup
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            // Light
            const light = new THREE.DirectionalLight(0xffffff, 1);
            light.position.set(1, 1, 1).normalize();
            scene.add(light);

            // Hand Skeleton Definition (Fingers with Two Parts)
            const material = new THREE.LineBasicMaterial({ color: 0x00ff00 });
            const handPoints = [
                new THREE.Vector3(0, 0, 0),    // Wrist
                new THREE.Vector3(-0.5, 1.0, 0), // Thumb base
                new THREE.Vector3(-0.5, 1.0, 0), // Thumb base
                new THREE.Vector3(-0.5, 1.5, 0.5), // Thumb tip (horizontal segment)
                new THREE.Vector3(0, 0, 0),    // Back to Wrist
                new THREE.Vector3(-0.2, 1.3, 0), // Index base
                new THREE.Vector3(-0.2, 1.3, 0), // Index base
                new THREE.Vector3(-0.2, 1.8, 0.5), // Index tip (horizontal segment)
                new THREE.Vector3(0, 0, 0),    // Back to Wrist
                new THREE.Vector3(0, 1.5, 0), // Middle base
                new THREE.Vector3(0, 1.5, 0), // Middle base
                new THREE.Vector3(0, 2.0, 0.5), // Middle tip (horizontal segment)
                new THREE.Vector3(0, 0, 0),    // Back to Wrist
                new THREE.Vector3(0.2, 1.3, 0), // Ring base
                new THREE.Vector3(0.2, 1.3, 0), // Ring base
                new THREE.Vector3(0.2, 1.7, 0.5), // Ring tip (horizontal segment)
                new THREE.Vector3(0, 0, 0),    // Back to Wrist
                new THREE.Vector3(0.4, 1.0, 0), // Little base
                new THREE.Vector3(0.4, 1.0, 0), // Little base
                new THREE.Vector3(0.4, 1.5, 0.5)  // Little tip (horizontal segment)
            ];

            const handGeometry = new THREE.BufferGeometry().setFromPoints(handPoints);
            const handSkeleton = new THREE.LineSegments(handGeometry, material);
            scene.add(handSkeleton);

            camera.position.z = 5;

            // Mouse drag rotation variables
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };

            container.addEventListener("mousedown", (event) => {
                isDragging = true;
                previousMousePosition = { x: event.clientX, y: event.clientY };
            });

            container.addEventListener("mousemove", (event) => {
                if (!isDragging) return;

                let deltaX = event.clientX - previousMousePosition.x;
                let deltaY = event.clientY - previousMousePosition.y;

                handSkeleton.rotation.y += deltaX * 0.01;
                handSkeleton.rotation.x += deltaY * 0.01;

                previousMousePosition = { x: event.clientX, y: event.clientY };
            });

            container.addEventListener("mouseup", () => {
                isDragging = false;
            });

            container.addEventListener("mouseleave", () => {
                isDragging = false;
            });

            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate();
        });
    </script>
</head>
<body>
<h1>Three.js Hand Skeleton Visualization</h1>
<div id="visualization-container" style="width: 800px; height: 600px; cursor: grab;"></div>
</body>
</html>
